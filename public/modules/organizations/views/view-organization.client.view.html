<section class="org" ng-init="findOrganization()">
  <div class="org-container" ng-switch on="userPermission" ng-controller="PlantsController">
    <div class="org-profile">      

      <div class="org-profile-header" 
        ng-style="{ 'background': 'url(' + organization.profileImage + ')' + ' no-repeat center center fixed' }">
        <div class="org-profile-thumb"></div>
        <div class="org-profile-description"></div>
        <div class="button" ngf-select="uploadProfileImage($file, 'profile-image')"
        ng-show="userPermission == 'owner'">Update Profile Image</div>
      </div>
      <div ng-show="userPermission == 'owner'">
        Approval Requests <span class="badge">{{approvalRequests}}</span>
        <div zf-action-sheet="">
          <div zf-as-button="" title="I'm an Action Sheet"></div>
            <div zf-as-content="" position="bottom">
            <p>Approval Requests</p>
            <ul>
              <li ng-repeat="requestUser in organization.approvalRequests" >
                <a ng-click="approveUser(requestUser, organization)" class="button">approve</a>
                <a ng-click="denyUser(requestUser, organization)" class="button">deny</a>
                {{requestUser.user}}
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- products display -->
      <div class="org-products">     
        <div class="org-products-table">          
          <plant-owner-table ng-show="authorized == true || userPermission == 'owner'"></plant-owner-table>         
        </div>
          <div class="org-request" ng-show="authorized == false && userPermission == 'user'">
            <h2>Request authorization</h2>            
            <div  class="button" ng-click="requestAuthorization(user, organization)">
              Request
            </div>
          </div>       
      </div>

    </div>

    <!-- User order sidebar -->
    <div class="org-order" ng-switch-when="user">
      <div class="org-order-description"></div>
      <div class="org-order-items">
        <div class="org-order-item" ng-repeat="plants in order.plants">
          {{error}}
          {{plants.plant.commonName}}
          {{plants.quantity}}
          {{plants.plant.unitPrice}}
          {{plants.plant.unitRoyalty}}
          <div class="button" ng-click="removePlantOrder($index, plants, plants.quantity, plants.availability)">X</div>
        </div>
        <div ng-show="order.plants < 1">
          Add something to your order
        </div>  
        {{order.totalCost}}      
      </div>
      <div class="org-order-checkout">
        <div class="org-order-checkout-total"></div>
        <button class="org-order-checkout-button">Checkout</button>
      </div>
    </div>

  </div>
</section>